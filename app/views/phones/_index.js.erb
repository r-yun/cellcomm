$(function() {
  var checkbox = document.getElementsByClassName("checkbox");
  for (var i = 0; i < checkbox.length; i++) {
    checkbox[i].addEventListener("click", allToggle);
    checkbox[i].addEventListener("click", atleastOneChecked);
    checkbox[i].addEventListener("click", formSubmit);
  }
});

function formSubmit(){
  $("#filter_form").submit();
}

function allToggle(){
  if (this.checked){
    var class_name = this.classList[0];
    if (class_name == "all"){
      var single = document.getElementsByClassName("single");
      for (var i = 0; i < brand.length; i++) {
        single[i].checked = "";
      } // for
    } // if(class_name == all)

    else {
      var all = document.getElementsByClassName("all");
      for (var i = 0; i < all.length; i++){
        all[i].checked = "";
      } // for
    } // else
  } // if(this.checked)
} // allToggle()

function atleastOneChecked(){
  var checkboxes = document.getElementsByClassName("checkbox");
  var checkboxChecked = false;
  for (var i = 0; i < checkboxes.length; i++){
    if (checkboxes[i].checked){
      checkboxChecked = true;
      break;
    }
  }

  if (checkboxChecked == false){
    var all = document.getElementsByClassName("all");
    for (var i = 0; i < all.length; i++){
      all[i].checked = true;
    } // for
  } // if
} // atleastOneChecked()
